<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmChain - Web3 Farmer-to-Consumer Marketplace</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">
    
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .navbar {
            z-index: 1050 !important;
            position: sticky !important;
            top: 0 !important;
            background-color: #ffffff !important;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08) !important;
            border-bottom: 1px solid #e5e7eb !important;
            min-height: 56px;
            padding: 0.5rem 0;
        }
        
        .navbar-collapse {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        .navbar-nav {
            display: flex !important;
            flex-direction: row !important;
            list-style: none !important;
            margin: 0;
            padding: 0;
        }
        
        .nav-item {
            display: block !important;
            margin: 0 0.125rem;
        }
        
        .navbar-brand {
            font-weight: 600;
            font-size: 1.1rem;
            color: #667eea !important;
            text-decoration: none;
            padding: 0.25rem 0;
            margin-right: 1.5rem;
        }
        
        .navbar-brand i {
            font-size: 1rem;
            margin-right: 0.4rem;
        }
        
        .navbar-nav .nav-link {
            font-weight: 500;
            font-size: 0.875rem;
            color: #6b7280 !important;
            padding: 0.375rem 0.75rem !important;
            border-radius: 6px;
            transition: all 0.2s ease;
            text-decoration: none !important;
            margin: 0;
            white-space: nowrap;
        }
        
        .navbar-nav .nav-link:hover {
            color: #667eea !important;
            background-color: #f8fafc;
        }
        
        body {
            padding-top: 0; /* Remove padding since we're using sticky */
        }
        
        /* Utility classes */
        .gap-2 > * + * {
            margin-left: 0.5rem;
        }
        
        /* Responsive navbar styles */
        @media (max-width: 991px) {
            .navbar-nav {
                margin-top: 0.5rem;
            }
            
            .navbar-nav .nav-link {
                padding: 0.5rem 0.75rem !important;
            }
            
            .navbar-brand {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 576px) {
            .navbar-brand {
                font-size: 0.95rem;
            }
            
            .navbar-brand i {
                font-size: 0.9rem;
                margin-right: 0.3rem;
            }
            
            .navbar-nav .nav-link {
                font-size: 0.8rem;
                padding: 0.3rem 0.6rem !important;
            }
        }
        
        /* Status badge styles */
        .badge {
            font-size: 0.65rem;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        
        /* Button styles */
        .btn {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .btn-outline-primary {
            border-color: #667eea;
            color: #667eea;
        }
        
        .btn-outline-primary:hover {
            background-color: #667eea;
            border-color: #667eea;
            color: white;
        }
        
        .btn-primary-custom {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
        }
        
        .btn-primary-custom:hover {
            background: linear-gradient(45deg, #5a67d8, #6b46c1);
            transform: translateY(-1px);
        }
        
        .web3-status {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            background-color: #f3f4f6;
            color: #6b7280;
        }
        
        .web3-status.connected {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 60vh;
        }
        
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            border-radius: 12px;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .btn-primary-custom {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 8px;
            padding: 10px 24px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .web3-status {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .connected {
            background-color: #d4edda;
            color: #155724;
        }
        
        .disconnected {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .farmer-badge {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .price-tag {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2563eb;
        }
        
        .category-filter {
            cursor: pointer;
            padding: 8px 16px;
            margin: 4px;
            border: 2px solid #e5e7eb;
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .category-filter:hover, .category-filter.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand text-primary" href="#">
                <i class="fas fa-seedling me-2"></i>FarmChain
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse show" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#products">Products</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#farmers">Farmers</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
                
                <div class="d-flex align-items-center gap-2">
                    <div class="me-2">
                        <small class="text-muted">Status: <span id="appStatus" class="badge bg-success">Online</span></small>
                    </div>
                    <button class="btn btn-outline-primary cart-button" data-bs-toggle="modal" data-bs-target="#cartModal">
                        <i class="fas fa-shopping-cart me-1"></i>Cart (0)
                    </button>
                    <span id="walletStatus" class="web3-status disconnected me-2">
                        <i class="fas fa-wallet me-1"></i>Connect Wallet
                    </span>
                    <button id="connectWallet" class="btn btn-primary-custom">
                        <i class="fas fa-plug me-1"></i>Connect Web3
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section text-white p-4">
        <div class="container h-100 d-flex align-items-center">
            <div class="row w-100">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">
                        Direct from Farm to Your Table
                    </h1>
                    <p class="lead mb-4">
                        Experience the future of agriculture with our Web3-powered marketplace. 
                        Connect directly with farmers, ensure product authenticity, and support sustainable farming.
                    </p>
                    <div class="d-flex gap-3">
                        <button class="btn btn-light btn-lg" onclick="document.getElementById('products').scrollIntoView({ behavior: 'smooth' })">
                            <i class="fas fa-shopping-cart me-2"></i>Shop Now
                        </button>
                        <button class="btn btn-outline-light btn-lg" data-bs-toggle="modal" data-bs-target="#becomeFarmerModal">
                            <i class="fas fa-user-tie me-2"></i>Become a Farmer
                        </button>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <i class="fas fa-tractor" style="font-size: 8rem; opacity: 0.8;"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-5">
        <div class="container">
            <div class="row text-center mb-5">
                <div class="col-12">
                    <h2 class="fw-bold text-dark mb-3">Why Choose FarmChain?</h2>
                    <p class="text-muted">Revolutionizing agriculture with blockchain technology</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4 mb-4">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-primary mb-3">
                                <i class="fas fa-shield-alt" style="font-size: 3rem;"></i>
                            </div>
                            <h5 class="card-title fw-bold">Verified Authenticity</h5>
                            <p class="card-text text-muted">
                                Every product is verified on the blockchain, ensuring complete transparency and authenticity.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-success mb-3">
                                <i class="fas fa-handshake" style="font-size: 3rem;"></i>
                            </div>
                            <h5 class="card-title fw-bold">Direct Connection</h5>
                            <p class="card-text text-muted">
                                Connect directly with farmers, eliminating middlemen and ensuring fair prices.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body p-4">
                            <div class="text-warning mb-3">
                                <i class="fas fa-coins" style="font-size: 3rem;"></i>
                            </div>
                            <h5 class="card-title fw-bold">Secure Payments</h5>
                            <p class="card-text text-muted">
                                Smart contracts ensure secure, transparent, and instant payments to farmers.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-5 bg-white">
        <div class="container">
            <div class="row mb-5">
                <div class="col-12 text-center">
                    <h2 class="fw-bold text-dark mb-3">Fresh Products</h2>
                    <p class="text-muted">Discover fresh, organic products directly from verified farmers</p>
                </div>
            </div>
            
            <!-- Category Filters -->
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <div class="category-filter active" data-category="all">All Products</div>
                    <div class="category-filter" data-category="vegetables">Vegetables</div>
                    <div class="category-filter" data-category="fruits">Fruits</div>
                    <div class="category-filter" data-category="grains">Grains</div>
                    <div class="category-filter" data-category="dairy">Dairy</div>
                    <div class="category-filter" data-category="spices">Spices</div>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div id="productsGrid" class="row">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Farmers Section -->
    <section id="farmers" class="py-5">
        <div class="container">
            <div class="row mb-5">
                <div class="col-12 text-center">
                    <h2 class="fw-bold text-dark mb-3">Meet Our Farmers</h2>
                    <p class="text-muted">Get to know the hardworking farmers behind your food</p>
                </div>
            </div>
            
            <div id="farmersGrid" class="row">
                <!-- Farmers will be loaded here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-5 bg-white">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h2 class="fw-bold text-dark mb-4">About FarmChain</h2>
                    <p class="text-muted mb-4">
                        FarmChain is a revolutionary Web3-based marketplace that connects farmers directly with consumers. 
                        Using blockchain technology, we ensure transparency, authenticity, and fair trade in the agricultural sector.
                    </p>
                    <p class="text-muted mb-4">
                        Our platform eliminates intermediaries, allowing farmers to receive fair prices for their products 
                        while consumers get access to fresh, verified organic produce.
                    </p>
                    <div class="d-flex gap-3">
                        <div class="text-center">
                            <h3 class="fw-bold text-primary">500+</h3>
                            <p class="text-muted">Verified Farmers</p>
                        </div>
                        <div class="text-center">
                            <h3 class="fw-bold text-success">10k+</h3>
                            <p class="text-muted">Happy Customers</p>
                        </div>
                        <div class="text-center">
                            <h3 class="fw-bold text-warning">1M+</h3>
                            <p class="text-muted">Products Sold</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <i class="fas fa-globe" style="font-size: 8rem; color: #667eea; opacity: 0.8;"></i>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-seedling me-2"></i>FarmChain
                    </h5>
                    <p class="text-muted">
                        Connecting farmers and consumers through blockchain technology for a sustainable future.
                    </p>
                </div>
                <div class="col-md-2">
                    <h6 class="fw-bold mb-3">Platform</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted text-decoration-none">Home</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Products</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Farmers</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">About</a></li>
                    </ul>
                </div>
                <div class="col-md-2">
                    <h6 class="fw-bold mb-3">Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-muted text-decoration-none">Help Center</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Contact</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Privacy</a></li>
                        <li><a href="#" class="text-muted text-decoration-none">Terms</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h6 class="fw-bold mb-3">Connect</h6>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-muted"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-facebook fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-instagram fa-lg"></i></a>
                        <a href="#" class="text-muted"><i class="fab fa-linkedin fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <div class="text-center text-muted">
                <p>&copy; 2024 FarmChain. All rights reserved. Built with ❤️ for sustainable agriculture.</p>
            </div>
        </div>
    </footer>

    <!-- Duplicate modal removed to prevent conflicts -->



    <!-- Shopping Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">
                        <i class="fas fa-shopping-cart me-2"></i>Shopping Cart
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="cartItems">
                        <!-- Cart items will be populated here -->
                    </div>
                    <div id="emptyCart" class="text-center py-5" style="display: none;">
                        <i class="fas fa-shopping-cart text-muted" style="font-size: 4rem;"></i>
                        <h4 class="text-muted mt-3">Your cart is empty</h4>
                        <p class="text-muted">Add some products to get started!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="d-flex justify-content-between align-items-center w-100">
                        <div>
                            <h5 class="mb-0">Total: <span id="cartTotal">₹0</span></h5>
                            <small class="text-muted">ETH: <span id="cartTotalETH">0.0000</span></small>
                        </div>
                        <div>
                            <button type="button" class="btn btn-outline-danger me-2" onclick="app.clearCart()">
                                <i class="fas fa-trash me-2"></i>Clear Cart
                            </button>
                            <button type="button" class="btn btn-primary-custom" onclick="app.checkoutCart()">
                                <i class="fas fa-credit-card me-2"></i>Checkout with Web3
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Become a Farmer Modal -->
    <div class="modal fade" id="becomeFarmerModal" tabindex="-1" aria-labelledby="becomeFarmerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="becomeFarmerModalLabel">
                        <i class="fas fa-user-tie me-2"></i>Become a Farmer
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-user me-2"></i>Farmer Registration
                            </h6>
                            <form id="farmerRegistrationForm">
                                <div class="mb-3">
                                    <label for="farmerName" class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="farmerName" required>
                                </div>
                                <div class="mb-3">
                                    <label for="farmerLocation" class="form-label">Location (State, India)</label>
                                    <input type="text" class="form-control" id="farmerLocation" placeholder="e.g., Punjab, India" required>
                                </div>
                                <div class="mb-3">
                                    <label for="farmerExperience" class="form-label">Experience (years)</label>
                                    <input type="number" class="form-control" id="farmerExperience" min="1" required>
                                </div>
                                <div class="mb-3">
                                    <label for="farmerSpecialty" class="form-label">Primary Specialty</label>
                                    <select class="form-select" id="farmerSpecialty" required>
                                        <option value="">Select specialty</option>
                                        <option value="vegetables">Vegetables</option>
                                        <option value="fruits">Fruits</option>
                                        <option value="grains">Grains</option>
                                        <option value="dairy">Dairy</option>
                                        <option value="spices">Spices</option>
                                        <option value="organic">Organic Farming</option>
                                        <option value="mixed">Mixed Farming</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="farmerFarmSize" class="form-label">Farm Size (acres)</label>
                                    <input type="number" class="form-control" id="farmerFarmSize" min="0.1" step="0.1" required>
                                </div>
                                <div class="mb-3">
                                    <label for="farmerBio" class="form-label">Bio</label>
                                    <textarea class="form-control" id="farmerBio" rows="3" placeholder="Tell us about your farming journey..." required></textarea>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="farmerTerms" required>
                                    <label class="form-check-label" for="farmerTerms">
                                        I agree to the terms and conditions and certify that the information provided is accurate.
                                    </label>
                                </div>
                                <button type="submit" class="btn btn-primary-custom">
                                    <i class="fas fa-user-plus me-2"></i>Register as Farmer
                                </button>
                            </form>
                        </div>
                        <div class="col-md-6">
                            <h6 class="fw-bold mb-3">
                                <i class="fas fa-plus me-2"></i>Add New Product
                            </h6>
                            <div id="productFormContainer" style="display: none;">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>Please register as a farmer first to add products.
                                </div>
                            </div>
                            <form id="addProductForm" style="display: none;">
                                <div class="mb-3">
                                    <label for="productName" class="form-label">Product Name</label>
                                    <input type="text" class="form-control" id="productName" required>
                                </div>
                                <div class="mb-3">
                                    <label for="productCategory" class="form-label">Category</label>
                                    <select class="form-select" id="productCategory" required>
                                        <option value="">Select Category</option>
                                        <option value="vegetables">Vegetables</option>
                                        <option value="fruits">Fruits</option>
                                        <option value="grains">Grains</option>
                                        <option value="dairy">Dairy</option>
                                        <option value="spices">Spices</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="productPrice" class="form-label">Price (₹)</label>
                                    <input type="number" class="form-control" id="productPrice" min="1" required>
                                </div>
                                <div class="mb-3">
                                    <label for="productQuantity" class="form-label">Quantity</label>
                                    <input type="number" class="form-control" id="productQuantity" min="1" required>
                                </div>
                                <div class="mb-3">
                                    <label for="productUnit" class="form-label">Unit</label>
                                    <select class="form-select" id="productUnit" required>
                                        <option value="">Select Unit</option>
                                        <option value="kg">Kg</option>
                                        <option value="liters">Liters</option>
                                        <option value="pieces">Pieces</option>
                                        <option value="grams">Grams</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="productDescription" class="form-label">Description</label>
                                    <textarea class="form-control" id="productDescription" rows="3" placeholder="Describe your product..." required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="productImage" class="form-label">Product Image URL (optional)</label>
                                    <input type="url" class="form-control" id="productImage" placeholder="https://example.com/image.jpg">
                                </div>
                                <button type="submit" class="btn btn-success">
                                    <i class="fas fa-plus me-2"></i>Add Product
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Web3 Integration -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    
    <!-- Custom JS -->
    <script src="js/web3-contract.js"></script>
    <script src="js/app.js"></script>
</body>
</html>